<mat-card class="invoice-card" *ngIf="invoiceDetail" id="invoiceToPDF">
    <mat-card-content class="p-0">
        <div id="viewPdfButton">
            <!-- Custom Greeting -->
            <div class="invoice-greeting">
                Dear {{ invoiceDetail.billTo || 'Customer' }}, this is your invoice. Please review the details below.
            </div>
    
            <!-- Download Button -->
            <div class="download-section text-center">
                <button mat-flat-button class="download-btn" (click)="viewPDF()">
                    <mat-icon>picture_as_pdf</mat-icon>
                    Download Your Invoice
                </button>
            </div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <div>
                <span class="label">Order Status:</span>
                <p>{{ invoiceDetail.status }}</p>
            </div>
            <div class="text-right">
                <span class="label">Order Date:</span>
                <p>{{ invoiceDetail.orderDate | date : "fullDate" }}</p>
            </div>
        </div>

        <!-- Divider -->
        <mat-divider></mat-divider>

        <!-- Bill Info -->
        <div class="bill-info">
            <div>
                <h4 class="label">Bill From</h4>
                <p>{{ invoiceDetail.billFrom }}</p>
                <p>{{ invoiceDetail.billFromEmail }}</p>
                <p>{{ invoiceDetail.billFromAddress }}</p>
                <p>{{ invoiceDetail.billFromPhone }}</p>
            </div>
            <div class="text-right">
                <h4 class="label">Bill To</h4>
                <p>{{ invoiceDetail.billTo }}</p>
                <p>{{ invoiceDetail.billToEmail }}</p>
                <p>{{ invoiceDetail.billToAddress }}</p>
                <p>{{ invoiceDetail.billToPhone }}</p>
            </div>
        </div>

        <!-- Table -->
        <div class="table-responsive">
            <table class="invoice-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Price (MRP)</th>
                        <th>Discount (%)</th>
                        <th>Final Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="filteredPurchaseList.length === 0">
                        <td colspan="5">No records found</td>
                    </tr>
                    <tr *ngFor="let row of filteredPurchaseList; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ getProductName(row.productid) }} ({{ row.productUniqueNumber }})</td>
                        <td>₹{{ row.shellAmount | number:'1.2-2' }}/-</td>
                        <td>{{ row.shellDiscount || 0 }}%</td>
                        <td>
                            ₹{{ row.shellAmount - ((row.shellDiscount || 0) / 100 * row.shellAmount) | number:'1.2-2'
                            }}/-
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Totals -->
        <div class="totals">
            <h5>Sub total: ₹{{ productsubTotal | number:'1.2-2' }}/-</h5>
            <h5>Total Discount: ₹{{ totalDiscount | number:'1.2-2' }}/-</h5>
            <mat-divider></mat-divider>
            <h3 class="grand-total">Grand Total: ₹{{ productgrandTotal | number:'1.2-2' }}/-</h3>
        </div>

    </mat-card-content>
</mat-card>